# План Восстановления Среды

Этот документ описывает шаги для полного восстановления рабочей среды в новом или сброшенном окружении Google Cloud Shell.

## Шаг 1: Клонирование репозитория

Первый шаг — клонировать этот репозиторий, содержащий все настройки и скрипты.

```bash
git clone git@github.com:igor04091968/cloud-google-marzban-settings.git
cd cloud-google-marzban-settings
```

## Шаг 2: Запуск скрипта восстановления

В репозитории находится главный скрипт `restore_environment.sh`, который автоматизирует всю настройку. Запустите его:

```bash
./restore_environment.sh
```

В процессе выполнения скрипт запросит у вас пароль для расшифровки SSH-ключа `id_rsa_vds1`.

### Что делает скрипт?

1.  **Устанавливает пакеты:** Обновляет списки пакетов и устанавливает необходимые утилиты (`jq`, `htop`, `mc`, `openssl`).
2.  **Настраивает SSH:**
    *   Создает символическую ссылку на файл конфигурации `~/.ssh/config` из репозитория.
    *   Расшифровывает приватный ключ `id_rsa_vds1.enc` и помещает его в `~/.ssh/id_rsa_vds1` с правильными правами доступа.
3.  **Настраивает Git:** Создает символическую ссылку на файл `.gitconfig`.
4.  **Проверяет работоспособность:** В конце скрипт выполняет автоматическую проверку, пытаясь войти в панель `x-ui` через туннель на VDS. Это подтверждает, что вся цепочка (Cloud Shell -> VDS -> Kubernetes -> x-ui) работает корректно.

## Шаг 3: Завершение

После успешного выполнения скрипта ваша среда полностью готова к работе. Все ключи, конфигурации и утилиты находятся на своих местах.
