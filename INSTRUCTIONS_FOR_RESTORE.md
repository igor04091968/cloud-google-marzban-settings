# Инструкция по восстановлению рабочей среды

Этот документ описывает, как полностью воссоздать рабочую среду для `x-ui` с туннелем `chisel` и выходом через `WARP`.

## 1. Настройка сервера `vds1`

Вся конфигурация сервера `vds1` (Nginx, Chisel Server) задокументирована в файле `vds1_and_client_final_setup.md`.

## 2. Развертывание локального контейнера `x-ui`

### Шаг 2.1: Распаковка файлов

1.  Распакуйте архив `huggingface-x-ui-final-backup.tar.gz`. Появится директория `huggingface-x-ui-final` со всеми необходимыми файлами (`Dockerfile`, `start.sh` и т.д.).
2.  Распакуйте архив `x-ui-config.tar.gz`. Появится директория `x-ui-config` с файлом `x-ui.db`.

### Шаг 2.2: Сборка и запуск контейнера

1.  **Соберите образ Docker:**
    ```bash
    docker build -t local-x-ui ./huggingface-x-ui-final/
    ```
2.  **Запустите контейнер с постоянным хранилищем:**
    *   Убедитесь, что директория `x-ui-config` находится в текущей папке.
    *   Выполните команду, она подключит вашу папку `x-ui-config` к контейнеру:
    ```bash
    docker run -d --name local-x-ui-container -v "$(pwd)/x-ui-config":/etc/x-ui local-x-ui
    ```

### Шаг 2.3: Финальная настройка (выполняется один раз)

После первого запуска контейнера база данных `x-ui.db` будет чистой. Нужно импортировать в нее конфигурацию `xray` с поддержкой WARP.

1.  **Пробросьте порт туннеля на ваш ПК:**
    *   Локальный контейнер `x-ui` доступен на `vds1` на порту `8001`.
    *   Выполните на вашем ПК:
        ```bash
        ssh -L 8001:127.0.0.1:8001 root@vds1.iri1968.dpdns.org
        ```
2.  **Войдите в панель `x-ui`:**
    *   Откройте в браузере `http://localhost:8001`.
    *   Логин: `prog10`
    *   Пароль: `04091968`
3.  **Импортируйте конфиг:**
    *   Перейдите в "Настройки панели".
    *   Скопируйте все содержимое файла `xray_config_with_warp.json` и вставьте в поле для импорта.
    *   Сохраните. Панель перезапустится с уже примененной и сохраненной конфигурацией.

После этого вся среда полностью настроена и готова к работе. Конфигурация сохранится при перезапусках контейнера.
